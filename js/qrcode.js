!function(){function e(e){var o=e.replace("-","_"),n={};return n[o+"_option_type"]=$("#"+e+"-option-type").val(),n[o+"_option_color"]=$("#"+e+"-option-color").val(),n}function o(e,o){return{color:e[o+"_option_color"],type:e[o+"_option_type"]}}window.fetchQuery=function(){for(var e={},o=location.search.substring(1),n=o.split("&"),r=0;r<n.length;++r){var t=n[r].split("=");e[t[0]]=decodeURIComponent(t[1])}return e},window.generateByQuery=function(e){var n=e.type;"svg-image"===n?n="svg":"jpg"===n&&(n="canvas");var r={width:e.size,height:e.size,type:n,data:e.input,dotsOptions:o(e,"dot"),cornersSquareOptions:o(e,"corners_square"),cornersDotOptions:o(e,"corners_dot")},t=new QRCodeStyling(r),i=document.getElementById("qrcode");if(t.append(i),"svg-image"===e.type){var c=encodeURIComponent(i.innerHTML.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"')),a="data:image/svg+xml,"+c;i.innerHTML='<img src="'+a+'"/>'}else if("jpg"===e.type){var a=document.querySelector("canvas").toDataURL("image/jpeg",.3);i.innerHTML='<img src="'+a+'"/>'}},window.generate=function(o){document.getElementById("qrcode").innerHTML="";var n=$("#size").val(),r=Object.assign({input:o,type:$("#type").val(),size:n},e("dot"),e("corners-square"),e("corners-dot"));generateByQuery(r);var t=$("#share-link").val().replace("/qrcode.html?","/qrcode_embed.html?");return $("#qrcode-link").val(t),'<iframe src="'+t+'" frameborder="0" scrolling="no" width="'+n+'" height="'+n+'"></iframe>'},window.$&&$(window).on("methodLoad",function(){$(".color-input").each(function(){var e,o=$(this).find("input"),n=$(this).find(".color");n.css("background-color",o.val()),o.bind("change",function(){n.css("background-color",o.val()),e&&(e.color.setColor(o.val()),e.render())}),n.colorPicker({doRender:!1,buildCallback:function(){e=this},renderCallback:function(e,r){n.css("background-color",e._css.backgroundColor),!1===r&&(o.val(e._css.backgroundColor),o.trigger("input"))}})})})}();